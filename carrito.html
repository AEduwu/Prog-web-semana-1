<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito de Compras - TodoJuegos</title>
    <link rel="icon" href="img/icon.png" type="image/png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <style>
        .cart-item-img {
            width: 100px;
            height: 100px;
            object-fit: cover;
        }
        
        .cart-container {
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 80px;
        }
        
        .cart-table th, .cart-table td {
            color: white;
            vertical-align: middle;
        }
        
        .quantity-control {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .quantity-btn {
            background-color: #343a40;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 5px;
        }
        
        .quantity-input {
            width: 50px;
            text-align: center;
            background-color: transparent;
            color: white;
            border: 1px solid #6c757d;
        }
        
        .remove-btn {
            background-color: #dc3545;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .total-section {
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
        }

        .checkout-btn {
            width: 100%;
            background-color: #28a745;
            font-weight: bold;
        }
        
        .continue-shopping-btn {
            width: 100%;
            background-color: #007bff;
            font-weight: bold;
        }
        
        .empty-cart {
            text-align: center;
            padding: 50px 20px;
        }
        
        .empty-cart h3 {
            margin-bottom: 20px;
        }
        
        /* CorrecciÃ³n para el botÃ³n "Aplicar" */
        .input-group .form-control {
            height: auto;
        }
        
        .input-group-append .btn {
            height: 80%;
            display: flex;
            align-items: center;
        }
        
        .coupon-group {
            display: flex;
            height: 36px; /* Altura fija para el grupo */
        }
        
        .coupon-group input {
            height: 90%;
        }
        
        .coupon-group button {
            height: 900%;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand d-flex align-items-center" href="index.html">
                    <img src="img/logo.jpg" alt="Logo de TodoJuegos" width="120" class="me-2">
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item"><a class="nav-link" href="index2.html">Principal</a></li>
                        <li class="nav-item"><a class="nav-link" href="Catalogo.html">Catalogo</a></li>
                        <li class="nav-item"><a class="nav-link" href="registration.html">Blog</a></li>
                        <li class="nav-item"><a class="nav-link" href="registration.html">Log-In</a></li>
                        <li class="nav-item">
                            <a class="nav-link cart-icon active" href="carrito.html">
                                ðŸ›’ Carrito
                                <span class="cart-count">3</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <div class="banner text-center p-4">
        <h1>Mi Carrito de Compras</h1>
        <p>Revisa tus productos seleccionados y completa tu compra</p>
    </div>

    <section class="container mt-5">
        <div class="cart-container">
            <!-- Tabla de productos en el carrito -->
            <div class="table-responsive">
                <table class="table cart-table">
                    <thead>
                        <tr>
                            <th scope="col">Producto</th>
                            <th scope="col">Precio</th>
                            <th scope="col">Cantidad</th>
                            <th scope="col">Subtotal</th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Producto 1 -->
                        <tr>
                            <td>
                                <div class="d-flex align-items-center">
                                    <img src="img/forzahorizon5caratula.jpg" class="cart-item-img mr-3" alt="Forza Horizon 5">
                                    <div>
                                        <h5 class="mb-0">Forza Horizon 5</h5>
                                        <small class="text-muted">Xbox Series X</small>
                                    </div>
                                </div>
                            </td>
                            <td>$20.000</td>
                            <td>
                                <div class="quantity-control">
                                    <button class="quantity-btn">-</button>
                                    <input type="text" class="quantity-input" value="1">
                                    <button class="quantity-btn">+</button>
                                </div>
                            </td>
                            <td>$20.000</td>
                            <td>
                                <button class="remove-btn">âœ•</button>
                            </td>
                        </tr>
                        <!-- Producto 2 -->
                        <tr>
                            <td>
                                <div class="d-flex align-items-center">
                                    <img src="img/nierauomatacaratula.jpg" class="cart-item-img mr-3" alt="NieR: Automata">
                                    <div>
                                        <h5 class="mb-0">NieR: Automata</h5>
                                        <small class="text-muted">PlayStation 4</small>
                                    </div>
                                </div>
                            </td>
                            <td>$15.000</td>
                            <td>
                                <div class="quantity-control">
                                    <button class="quantity-btn">-</button>
                                    <input type="text" class="quantity-input" value="1">
                                    <button class="quantity-btn">+</button>
                                </div>
                            </td>
                            <td>$15.000</td>
                            <td>
                                <button class="remove-btn">âœ•</button>
                            </td>
                        </tr>
                        <!-- Producto 3 -->
                        <tr>
                            <td>
                                <div class="d-flex align-items-center">
                                    <img src="img/aoe4caratula.jpg" class="cart-item-img mr-3" alt="Age of Empires IV">
                                    <div>
                                        <h5 class="mb-0">Age of Empires IV</h5>
                                        <small class="text-muted">PC Digital</small>
                                    </div>
                                </div>
                            </td>
                            <td>$10.000</td>
                            <td>
                                <div class="quantity-control">
                                    <button class="quantity-btn">-</button>
                                    <input type="text" class="quantity-input" value="1">
                                    <button class="quantity-btn">+</button>
                                </div>
                            </td>
                            <td>$10.000</td>
                            <td>
                                <button class="remove-btn">âœ•</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- SecciÃ³n para mostrar cuando el carrito estÃ¡ vacÃ­o (oculta por defecto) -->
            <div class="empty-cart" style="display: none;">
                <h3>Tu carrito estÃ¡ vacÃ­o</h3>
                <p>Explora nuestro catÃ¡logo y aÃ±ade productos a tu carrito</p>
                <a href="Catalogo.html" class="btn btn-primary mt-3">Ver CatÃ¡logo</a>
            </div>

            <!-- Resumen de la compra -->
            <div class="row mt-4">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="coupon">Â¿Tienes un cupÃ³n de descuento?</label>
                        <!-- Grupo de cupÃ³n corregido -->
                        <div class="coupon-group">
                            <input type="text" class="form-control" id="coupon" placeholder="Ingresa tu cÃ³digo">
                            <div class="input-group-append">
                                <button class="btn btn-secondary" type="button">âœ”</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="total-section">
                        <div class="d-flex justify-content-between mb-2">
                            <span>Subtotal:</span>
                            <span>$45.000</span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Descuento:</span>
                            <span>$0</span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>EnvÃ­o:</span>
                            <span>$5.000</span>
                        </div>
                        <hr>
                        <div class="d-flex justify-content-between mb-2">
                            <strong>Total:</strong>
                            <strong>$50.000</strong>
                        </div>
                        <div class="row mt-3">
                            <div class="col-md-6 mb-2">
                                <a href="Catalogo.html" class="btn continue-shopping-btn">Seguir Comprando</a>
                            </div>
                            <div class="col-md-6">
                                <button class="btn checkout-btn">Finalizar Compra</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="text-center p-3 mt-4 bg-dark text-white">
        <p>Desarrollado por Grupo 2, DUOC UC</p>
    </footer>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"></script>
    <script>
        // CÃ³digo bÃ¡sico para manejar la funcionalidad del carrito
        $(document).ready(function() {
            // Incrementar cantidad
            $('.quantity-btn:contains("+")').click(function() {
                const input = $(this).siblings('.quantity-input');
                let value = parseInt(input.val());
                input.val(value + 1);
                updateSubtotal($(this).closest('tr'));
            });

            // Decrementar cantidad
            $('.quantity-btn:contains("-")').click(function() {
                const input = $(this).siblings('.quantity-input');
                let value = parseInt(input.val());
                if (value > 1) {
                    input.val(value - 1);
                    updateSubtotal($(this).closest('tr'));
                }
            });

            // Eliminar producto
            $('.remove-btn').click(function() {
                $(this).closest('tr').remove();
                updateTotal();
                
                // Mostrar mensaje de carrito vacÃ­o si no hay productos
                if ($('.cart-table tbody tr').length === 0) {
                    $('.table-responsive').hide();
                    $('.total-section').hide();
                    $('.empty-cart').show();
                }
            });

            // Actualizar subtotal de un producto
            function updateSubtotal(row) {
                const price = parseInt(row.find('td:nth-child(2)').text().replace('$', '').replace('.', ''));
                const quantity = parseInt(row.find('.quantity-input').val());
                const subtotal = price * quantity;
                row.find('td:nth-child(4)').text('$' + subtotal.toLocaleString());
                updateTotal();
            }

            // Actualizar total del carrito
            function updateTotal() {
                let total = 0;
                $('.cart-table tbody tr').each(function() {
                    const subtotalText = $(this).find('td:nth-child(4)').text().replace('$', '').replace('.', '');
                    total += parseInt(subtotalText);
                });
                
                const shipping = 5000;
                const discount = 0;
                const subtotal = total;
                total = subtotal + shipping - discount;
                
                $('.total-section .d-flex:nth-child(1) span:last-child').text('$' + subtotal.toLocaleString());
                $('.total-section .d-flex:nth-child(3) span:last-child').text('$' + shipping.toLocaleString());
                $('.total-section .d-flex:nth-child(5) strong:last-child').text('$' + total.toLocaleString());
            }
        });
    </script>
</body>
</html>